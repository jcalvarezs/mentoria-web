<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Prueba Javascript</title>

    <style>
        .square{
            width: 100px;
            height: 100px;
        }

        .red{
            background-color: red;
        }

        .blue{
            background-color: blue;
        }
    </style>
</head>
<body>
    <div id="parentDiv">
        <div id ="squareDiv" class="square red"></div> 
        <!-- <button id="changeColorButton">Change color</button> -->
        <button id="changeColorButton">Load User</button>
    </div>

     <img id = "imgLoad" src="" alt="">   

     <table>
         <thead>
         <tr>
             <th>Nombre Completo</th>
         </tr>
        </thead>
        <tbody id= "userTable">
        </tbody>
     </table>

    <script>
        //Ejemplo de uso de Dom, provee api para acceder a los abjetos

        //Consumir API , creda en API/index.php
        $('#changeColorButton').click(function(event){
            $.getJSON("http://mentoria13.segic.cl", function(data) {//endpoint es la URL
             console.log(data);
            
             let names = data.map((user) => user.firstname + " " + user.lastname);
             console.log(names);
             

             names.forEach(name => {
                 let trElement = "<tr><td>" + name + "</td></tr>"
                 $('#userTable').append(trElement);
                 
                 $('#userTable > tr').click(function(){
                    //$(this).fadeOut("slow");
                    //});
                   
                    //el callback remover(remover nodo) se ejecuta, sólo despues que termina la ejecucioń del primer parametro:desvanecer, 
                    $(this).fadeOut("slow", function(){
                        $(this).remove();
                    });
                 });
             });
             

            });
        });    


        // //Ajax eventos en segundo plano, asincronos
        // $('#changeColorButton').click(function(event){
        //     $.getJSON( "https://aws.random.cat/meow?ref=public-apis", function(data) {
        //     console.log(data);
            
        //     $('#imgLoad')
        //         .attr('src',data.file)
        //         .fadeIn("slow")//aparece la imagen al clickear el botón
        //         .click(function(){
        //             $("#imgLoad").fadeOut("slow");//desvance la imagen (no la elimina) al clickear la imagen!
        //         });
        //     });        
        // });

        //Ahora con jscript
        //botón cambia de color rojo a azul y desaparece    
        // $('#changeColorButton').click(function(event){
        //     console.log("El click!!");
        //     // if ($('#squareDiv').hasClass('red')){
        //     //     $('#squareDiv')
        //     //     .removeClass('red')
        //     //     .addClass('blue');
        //     // }else {
        //     //     $('#squareDiv')
        //     //         .removeClass('blue')
        //     //         .addClass('red');
        //     // }

        //     $("#squareDiv").fadeOut("slow",function(){
        //         console.log('termino de desaparecer');
        //     });
        // });

        // ////Ejemplo de uso de DOM    
        // ////Event bubbling (burbujeo)    
        // // let button = 
        // // document
        // //     .getElementById('changeColorButton')
        // //     console.log(button);//por consola muestra objeto botton y propiedades
        
        // document
        //     .getElementById('changeColorButton')
        //     .addEventListener('click', function(event){ //event es opcional
        //         //console.log("Me hicieron click!!!"); 
        //         event.stopPropagation();//detiene event bubbling,(event bubbling nodo hijo propaga evento a nodo padre)
        //         //console.log(event); //para visualizar informacion de event


        //         //cambiar color de botón
        //         let divElement = document
        //             .getElementById('squareDiv');
        //             if (divElement.classList.contains('red')){  
        //                 //divElement.classList.remove('red')
        //                 divElement.classList.replace('red', 'blue');
        //             }else{
        //                 divElement.classList.replace('blue', 'red');
        //             }

        //      });
        
        //     document
        //         .getElementById('parentDiv')
        //         .addEventListener('click', function(event){
        //             console.log('yeah baby');
        //         });

        ///Para la proxima clase/////////////////
        //DOM prox clase
        //Document Object Model
        //biblioteca axios y jquery (Yii)
        //juego
        ///Para la proxima clase/////////////////

        /////////////////////////////////////////
        //Introducción a Java Script

        //alert('hola mundo');

        //Definición de variables con var
        // var greeting= 'Hola Mundo desde variable';
        // alert(greeting);

        // var edad = 70;
        //let nombre= 'Juan Perez';

        // //altert detiene ejecución
        // if (edad <= 60){
        //     alert("joven");
        // } else {
        //     alert("viejito");
        // }

        // console.log(nombre);
        // console.error("oops algo paso");

        // //largodel nombre
        // console.log(nombre.length);
        
        // //Extrae una parte del nombre
        // console.log(nombre.slice(5,10));//Perez
        
        // //Reemplaza un nombre
        //console.log(nombre.replace('Perez','Martinez'));
        
        ////////////////////////////////////////////////
        var tasks = [
            {   
                "name":"Estudiar Javascript",
                "duration":60
            },
            {   
                "name":"Estudiar vue",
                "duration":150
            },
            {   
                "name":"Estudiar Laravel",
                "duration":100
            }
           
        ];
        //console.log(tasks);

        let taskNames = [];
        //solucion:1
        // for (let i=0; i < tasks.length; i++){
        //     taskNames.push(tasks[i].name);
        //     //console.log(tasks[i]);

        // }
        // console.log(taskNames);

        //solucion:2
        //version con callback: funcion ejecutable, funcion que se pasa como parametro a otra funcion
        // tasks.forEach(function(task){
        //     taskNames.push(task.name);
        // })
        // console.log(taskNames);

        //solucion 3,mas optimo
        //map transformacion de un arreglo 
        //sintaxis (parametros) => return implicito
        // let taskNames = tasks.map((task)=> task.name);
        // console.log(taskNames);

        //Filtrar datos bajo un criterio
        //solucion sin filter
        // let difficulTasks=[];
        // tasks.forEach(function(task){
        //     if (task.duration >= 100){
        //         difficulTasks.push(task.name);
        //     }
        // })
        // console.log(difficulTasks); 

        //solucion con filter
        // let difficulTasks = tasks.filter(function(task){
        //     return task.duration >=100;
        // });
        // console.log(difficulTasks); 

        //mejora al anterior
        // let difficulTasks=tasks
        //     .filter((task) => task.duration >=100)
        //     .map((task) => task.name);
        //     console.log(difficulTasks);            


        // let nombre = "Juan Perez";
        
        // //concatenaciones con +
        // console.log('Hola,' + nombre.toUpperCase());

        // //Funcionalidad de splice, elimina elementos en el arreglo
        // let frutas = ['Manzana','Peras','Naranjas', 'Platano'] ;
        // frutas.splice(0,1);
        // console.log(frutas);
        // frutas.splice(0,2);
        // console.log(frutas);
        // frutas.splice(1,2); ]
        // console.log(frutas); 

        // let frutas = ['Manzana','Peras','Naranjas', 'Platano'] ;
        // let frutasEliminadas = frutas.splice(1,2,'Durazno', 'Uva');
        // console.log(frutas); 
        // console.log(frutasEliminadas);
        
        // let frutas = ['Manzana','Peras','Naranjas', 'Platano'] ;
        // let frutasEliminadas = frutas.splice(1,1,'Uva');
        // console.log(frutasEliminadas);
        // console.log(frutas); 
        // console.log(frutas.indexOf('Platano'));
        
        // //simil entre jcript y php no ejecuta php aca    
        // //frutas.map((element) => element.name);
        // // array_map(fn($element) => $element->name);

    </script>
</body>
</html>